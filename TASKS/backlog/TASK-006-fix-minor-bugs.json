{
  "id": "TASK-006",
  "title": "Fix remaining 4 minor bugs",
  "type": "bug_fix",
  "priority": "MEDIUM",
  "assigned_to": "bug_fixer_agent",
  "status": "backlog",
  "created": "2025-10-19T21:00:00Z",
  "estimated_hours": 3,
  "dependencies": [],
  "blocking": [],
  "description": "Fix 4 remaining minor bugs identified in test results: hit tracking, orbit instability, range mismatch, and test cleanup timing.",
  "bugs_to_fix": [
    {
      "id": "WEAPON-002",
      "priority": "MEDIUM",
      "description": "Hit tracking dictionary issues - hit_enemies dictionary not always updated",
      "impact": "Cooldown system unreliable, enemies may be hit too frequently or not at all",
      "suggested_fix": "Review collision signal timing, ensure dictionary updates before cooldown checks"
    },
    {
      "id": "WEAPON-003",
      "priority": "MEDIUM",
      "description": "Orbit instability - Bonk Hammer loses orbit when player moves",
      "impact": "Visual glitch, orbit radius spikes to 3.98m (should be 1.8m)",
      "suggested_fix": "Review orbit calculation in _process(), ensure proper local position handling"
    },
    {
      "id": "WEAPON-004",
      "priority": "LOW",
      "description": "Magic Missile range mismatch - test expects 8m, actual is 15m",
      "impact": "Test/code specification mismatch",
      "suggested_fix": "Verify intended range with design, update either test or code to match"
    },
    {
      "id": "TEST-001",
      "priority": "LOW",
      "description": "Test cleanup timing - Spinning Blade tests can't find weapon sometimes",
      "impact": "Test reliability only, not a game bug",
      "suggested_fix": "Add longer waits or better cleanup between tests"
    }
  ],
  "acceptance_criteria": [
    "WEAPON-002: Hit tracking works reliably, no duplicate hits within cooldown",
    "WEAPON-003: Orbit remains stable at 1.8m during player movement",
    "WEAPON-004: Range specification clarified and consistent",
    "TEST-001: All Spinning Blade tests run reliably",
    "All weapon tests maintain >95% pass rate"
  ],
  "technical_details": {
    "affected_files": [
      "megabonk-mobile/scripts/weapons/BaseWeapon.gd (hit tracking, orbit)",
      "megabonk-mobile/scripts/weapons/BonkHammer.gd (orbit)",
      "megabonk-mobile/scripts/weapons/MagicMissile.gd (range)",
      "megabonk-mobile/scripts/testing/WeaponSystemTest.gd (test cleanup)"
    ],
    "test_file": "megabonk-mobile/scripts/testing/WeaponSystemTest.gd"
  },
  "test_commands": [
    "godot --headless --path megabonk-mobile res://scenes/testing/WeaponSystemTest.tscn"
  ],
  "knowledge_required": [
    "Collision detection and signal timing",
    "Orbital weapon mechanics",
    "GDScript test framework best practices"
  ],
  "expected_outcome": "WeaponSystemTest pass rate improves to >98%, all bugs resolved",
  "progress": {
    "percentage": 0,
    "last_update": "2025-10-19T21:00:00Z",
    "notes": "Nice-to-have for MVP, but improves quality"
  }
}
